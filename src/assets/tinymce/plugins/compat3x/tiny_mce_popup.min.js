var tinymce,tinyMCE;var tinyMCEPopup={init:function(){var a=this,d,c,b;d=a.getWin();tinymce=tinyMCE=d.tinymce;a.editor=tinymce.EditorManager.activeEditor;a.params=a.editor.windowManager.getParams();b=a.editor.windowManager.windows[a.editor.windowManager.windows.length-1];a.features=b.features;a.uiWindow=b;c=a.editor.settings;if(c.popup_css!==false){if(c.popup_css){c.popup_css=a.editor.documentBaseURI.toAbsolute(c.popup_css)}else{c.popup_css=a.editor.baseURI.toAbsolute("plugins/compat3x/css/dialog.min.css")}}if(c.popup_css_add){c.popup_css+=","+a.editor.documentBaseURI.toAbsolute(c.popup_css_add)}a.dom=a.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document,{ownEvents:true,proxy:tinyMCEPopup._eventProxy});a.dom.bind(window,"ready",a._onDOMLoaded,a);if(a.features.popup_css!==false){a.dom.loadCSS(a.features.popup_css||a.editor.settings.popup_css)}a.listeners=[];a.onInit={add:function(f,e){a.listeners.push({func:f,scope:e})}};a.isWindow=!a.getWindowArg("mce_inline");a.id=a.getWindowArg("mce_window_id")},getWin:function(){return(!window.frameElement&&window.dialogArguments)||opener||parent||top},getWindowArg:function(b,a){var c=this.params[b];return tinymce.is(c)?c:a},getParam:function(b,a){return this.editor.getParam(b,a)},getLang:function(b,a){return this.editor.getLang(b,a)},execCommand:function(c,b,d,a){a=a||{};a.skip_focus=1;this.restoreSelection();return this.editor.execCommand(c,b,d,a)},resizeToInnerSize:function(){},executeOnLoad:function(evil){this.onInit.add(function(){eval(evil)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var a=tinyMCEPopup;if(!a.isWindow&&tinymce.isIE){a.editor.selection.moveToBookmark(a.editor.windowManager.bookmark)}},requireLangPack:function(){var a=this,b=a.getWindowArg("plugin_url")||a.getWindowArg("theme_url"),c=a.editor.settings,d;if(c.language!==false){d=c.language||"en"}if(b&&d&&a.features.translate_i18n!==false&&c.language_load!==false){b+="/langs/"+d+"_dlg.js";if(!tinymce.ScriptLoader.isDone(b)){document.write('<script type="text/javascript" src="'+b+'"><\/script>');tinymce.ScriptLoader.markDone(b)}}},pickColor:function(d,a){var c=document.getElementById(a),b=this.editor.settings.color_picker_callback;if(b){b.call(this.editor,function(f){c.value=f;try{c.onchange()}catch(e){}},c.value)}},openBrowser:function(a,b){tinyMCEPopup.restoreSelection();this.editor.execCallback("file_browser_callback",a,document.getElementById(a).value,b,window)},confirm:function(b,a,c){this.editor.windowManager.confirm(b,a,c,window)},alert:function(b,a,c){this.editor.windowManager.alert(b,a,c,window)},close:function(){var a=this;function b(){a.editor.windowManager.close(window);tinymce=tinyMCE=a.editor=a.params=a.dom=a.dom.doc=null}if(tinymce.isOpera){a.getWin().setTimeout(b,0)}else{b()}},_restoreSelection:function(){var a=window.event.srcElement;if(a.nodeName=="INPUT"&&(a.type=="submit"||a.type=="button")){tinyMCEPopup.restoreSelection()}},_onDOMLoaded:function(){var c=tinyMCEPopup,e=document.title,d,a;if(c.features.translate_i18n!==false){var f={update:"Ok",insert:"Ok",cancel:"Cancel",not_set:"--",class_name:"Class name",browse:"Browse"};var g=(tinymce.settings?tinymce.settings:c.editor.settings).language||"en";for(var b in f){tinymce.i18n.data[g+"."+b]=tinymce.i18n.translate(f[b])}d=document.body.innerHTML;if(tinymce.isIE){d=d.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')}document.dir=c.editor.getParam("directionality","");if((a=c.editor.translate(d))&&a!=d){document.body.innerHTML=a}if((a=c.editor.translate(e))&&a!=e){document.title=e=a}}if(!c.editor.getParam("browser_preferred_colors",false)||!c.isWindow){c.dom.addClass(document.body,"forceColors")}document.body.style.display="";if(tinymce.Env.ie){if(tinymce.Env.ie<11){document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection);c.dom.add(c.dom.select("head")[0],"base",{target:"_self"})}else{document.addEventListener("mouseup",tinyMCEPopup._restoreSelection,false)}}c.restoreSelection();c.resizeToInnerSize();if(!c.isWindow){c.editor.windowManager.setTitle(window,e)}else{window.focus()}if(!tinymce.isIE&&!c.isWindow){c.dom.bind(document,"focus",function(){c.editor.windowManager.focus(c.id)})}tinymce.each(c.dom.select("select"),function(h){h.onkeydown=tinyMCEPopup._accessHandler});tinymce.each(c.listeners,function(h){h.func.call(h.scope,c.editor)});if(c.getWindowArg("mce_auto_focus",true)){window.focus();tinymce.each(document.forms,function(h){tinymce.each(h.elements,function(i){if(c.dom.hasClass(i,"mceFocus")&&!i.disabled){i.focus();return false}})})}document.onkeyup=tinyMCEPopup._closeWinKeyHandler;if("textContent" in document){c.uiWindow.getEl("head").firstChild.textContent=document.title}else{c.uiWindow.getEl("head").firstChild.innerText=document.title}},_accessHandler:function(a){a=a||window.event;if(a.keyCode==13||a.keyCode==32){var b=a.target||a.srcElement;if(b.onchange){b.onchange()}return tinymce.dom.Event.cancel(a)}},_closeWinKeyHandler:function(a){a=a||window.event;if(a.keyCode==27){tinyMCEPopup.close()}},_eventProxy:function(a){return function(b){tinyMCEPopup.dom.events.callNativeHandler(a,b)}}};tinyMCEPopup.init();tinymce.util.Dispatcher=function(a){this.scope=a||this;this.listeners=[];this.add=function(c,b){this.listeners.push({cb:c,scope:b||this.scope});return c};this.addToTop=function(e,c){var b=this,d={cb:e,scope:c||b.scope};if(b.inDispatch){b.listeners=[d].concat(b.listeners)}else{b.listeners.unshift(d)}return e};this.remove=function(d){var c=this.listeners,b=null;tinymce.each(c,function(f,e){if(d==f.cb){b=f;c.splice(e,1);return false}});return b};this.dispatch=function(){var b=this,f,c=arguments,d,e=b.listeners,g;b.inDispatch=true;for(d=0;d<e.length;d++){g=e[d];f=g.cb.apply(g.scope,c.length>0?c:[g.scope]);if(f===false){break}}b.inDispatch=false;return f}};